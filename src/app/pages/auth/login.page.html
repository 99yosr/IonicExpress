<ion-header translucent="true">
  <ion-toolbar>
    <ion-title>Sign in</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <ion-list lines="inset">
      <ion-item>
        <ion-label position="stacked">Email</ion-label>
        <ion-input
          type="email"
          formControlName="email"
          autocomplete="email"
          required
        ></ion-input>
      </ion-item>
      @if (emailInvalid) {
        <ion-text color="danger">
          Please enter a valid email address.
        </ion-text>
      }

      <ion-item>
        <ion-label position="stacked">Password</ion-label>
        <ion-input
          type="password"
          formControlName="password"
          autocomplete="current-password"
          required
        ></ion-input>
      </ion-item>
      @if (passwordInvalid) {
        <ion-text color="danger">
          Password must be at least 6 characters.
        </ion-text>
      }
    </ion-list>

    @if (errorMessage) {
      <ion-text color="danger">{{ errorMessage }}</ion-text>
    }

    <ion-button
      expand="block"
      type="submit"
      [disabled]="form.invalid || loading"
      class="ion-margin-top"
    >
      @if (loading) {
        <ion-spinner slot="start"></ion-spinner>
      }
      Sign in
    </ion-button>
  </form>

  <ion-button routerLink="/auth/register" fill="clear" class="ion-margin-top">
    Need an account? Register
  </ion-button>
</ion-content>
