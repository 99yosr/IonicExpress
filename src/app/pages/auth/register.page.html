<ion-header translucent="true">
  <ion-toolbar>
    <ion-title>Create account</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <ion-list lines="inset">
      <ion-item>
        <ion-label position="stacked">Full name</ion-label>
        <ion-input formControlName="name" autocomplete="name" required></ion-input>
      </ion-item>
      @if (nameInvalid) {
        <ion-text color="danger">Name is required.</ion-text>
      }

      <ion-item>
        <ion-label position="stacked">Email</ion-label>
        <ion-input type="email" formControlName="email" autocomplete="email" required></ion-input>
      </ion-item>
      @if (emailInvalid) {
        <ion-text color="danger">Provide a valid email.</ion-text>
      }

      <ion-item>
        <ion-label position="stacked">Password</ion-label>
        <ion-input type="password" formControlName="password" autocomplete="new-password" required></ion-input>
      </ion-item>
      @if (passwordInvalid) {
        <ion-text color="danger">
          Password must be at least 6 characters.
        </ion-text>
      }

      <ion-item>
        <ion-label position="stacked">Confirm password</ion-label>
        <ion-input type="password" formControlName="confirmPassword" autocomplete="new-password" required></ion-input>
      </ion-item>
      @if (confirmInvalid) {
        <ion-text color="danger">
          Passwords must match.
        </ion-text>
      }

      <ion-item>
        <ion-label position="stacked">You are a</ion-label>
        <ion-select formControlName="role" interface="popover">
          <ion-select-option value="user">Alert giver</ion-select-option>
          <ion-select-option value="responder">Responder</ion-select-option>
        </ion-select>
      </ion-item>
    </ion-list>

    @if (errorMessage) {
      <ion-text color="danger">{{ errorMessage }}</ion-text>
    }

    <ion-button
      expand="block"
      type="submit"
      [disabled]="form.invalid || loading"
      class="ion-margin-top"
    >
      @if (loading) {
        <ion-spinner slot="start"></ion-spinner>
      }
      Create account
    </ion-button>
  </form>

  <ion-button routerLink="/auth/login" fill="clear" class="ion-margin-top">
    Already have an account? Sign in
  </ion-button>
</ion-content>
